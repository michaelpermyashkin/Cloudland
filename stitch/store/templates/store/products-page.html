<!-- Extends base template  -->
{% extends "store/base.html" %}
<!-- Loads static content to access content in static directory -->
{% load static %}
<!-- Page title for window tab -->
{% block page %}Shop{% endblock page%}
<!-- Custom page styles -->
{% block styles %}
<link href="{% static 'store/css/products-page-styles.css' %}" rel="stylesheet">{% endblock styles %}
<!-- fills content block in base template -->
{% block content %}
<div class="container body-content-buffer">
    <!-- Filter display when window is wide and nothing is collapsed -->
    <div id="category-menu-list">
        <!-- Additional filter drop down -->
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-9">
                            <ul class="list-inline text-left" id="category-menu-items">
                                <li class="list-inline-item">
                                    <a id="category_All" href="{% url 'store-products-page-all' %}">All</a>
                                </li>
                                {% for category in categories %}
                                <li class="list-inline-item">
                                    <a id="category_{{ category.slug}}" href="{% url 'store-products-page-filter-category' category.slug %}">{{ category.name }}</a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="col-3 text-right">
                            <h4 class="panel-title text-right  text-light pt-2">
                                <a data-toggle="collapse" href="#collapse1" id="filter-collapse-label">Filters <li class="fa fa-plus" id="plus-icon"></li></a>
                            </h4>
                        </div>
                    </div>
                </div>
                <div id="collapse1" class="panel-collapse collapse">
                    <div class="row">
                        <!-- Order by -->
                        <div class="col-3 float-left">
                            <h4><b>Order By</b></h4>
                            <ul class="list-group" id="category-menu-items" style="list-style-type: none;">
                                <li><a href="{% url 'store-products-order-by' '?' %}">Default</a></li>
                            </ul>
                            <ul class="list-group" id="category-menu-items" style="list-style-type: none;">
                                <li><a href="{% url 'store-products-order-by' 'price' %}">Price: low to high</a></li>
                            </ul>
                            <ul class="list-group" id="category-menu-items" style="list-style-type: none;">
                                <li><a href="{% url 'store-products-order-by' '-price' %}">Price: high to low</a></li>
                            </ul>
                        </div>
                        <!-- Filter by seller -->
                        <div class="col-3 float-left">
                            <h4><b>Shop by Seller</b></h4>
                            <ul class="list-group" id="category-menu-items" style="list-style-type: none;">
                                {% for seller in sellers %}
                                <li>
                                    <a id="seller_{{ seller.slug}}" href="{% url 'store-products-page-filter-seller' seller.slug %}">{{ seller.seller_listing_name | capfirst}}</a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <!-- Filter by price -->
                        <div class="col-3 float-left">
                            <h4><b>Shop by Price</b></h4>
                            <ul class="list-group" id="category-menu-items" style="list-style-type: none;">
                                <li><a href="{% url 'store-products-page-filter-price' 0 5 %}">$0.00 - $5.00</a></li>
                                <li><a href="{% url 'store-products-page-filter-price' 5 10 %}">$5.00 - $10.00</a></li>
                                <li><a href="{% url 'store-products-page-filter-price' 10 15 %}">$10.00 - $15.00</a></li>
                                <li><a href="{% url 'store-products-page-filter-price' 15  %}">$15.00+</a></li>
                            </ul>
                        </div>
                    </div>
                    <br>
                    <br>
                </div>
            </div>
        </div>
    </div>
    <!-- Filter display when window is collapsed -->
    <div id="category-menu-list-collapsing">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" href="#collapse1" id="filter-collapse-label">Filters <li class="fa fa-plus" id="plus-icon"></li></a>
                </h4>
            </div>
            <div id="collapse1" class="panel-collapse collapse">
                <div class="accordion md-accordion" id="accordion" role="tablist" aria-multiselectable="true">
                    <!-- Categories card -->
                    <div class="card">
                        <div class="card-header" role="tab" id="categoriesHeading">
                            <a data-toggle="collapse" data-parent="#accordion" href="#categoriesCollapse" aria-expanded="true" aria-controls="categoriesCollapse">
                                <div class="row">
                                    <div class="col-9">
                                        <h5 class="mb-0" id="collapsed-accordion-label"><b>Categories</b></h5>
                                    </div>
                                    <div class="col-3 text-right text-dark">
                                        <li class="fa fa-plus" id="plus-icon"></li>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div id="categoriesCollapse" class="collapse" role="tabpanel" aria-labelledby="categoriesHeading" data-parent="#accordion">
                            <ul class="text-left" id="category-menu-items">
                                {% for category in categories %}
                                <li class="list-inline-item">
                                    <a id="category_{{category.slug}}" href="{% url 'store-products-page-filter-category' category.slug %}">{{ category.name }}</a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- Sellers card -->
                    <div class="card">
                        <div class="card-header" role="tab" id="sellerHeading">
                            <a data-toggle="collapse" data-parent="#accordion" href="#sellerCollapse" aria-expanded="true" aria-controls="categoriesCollapse">
                                <div class="row">
                                    <div class="col-9">
                                        <h5 class="mb-0" id="collapsed-accordion-label"><b>Sellers</b></h5>
                                    </div>
                                    <div class="col-3 text-right text-dark">
                                        <li class="fa fa-plus" id="plus-icon"></li>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div id="sellerCollapse" class="collapse" role="tabpanel" aria-labelledby="sellerHeading" data-parent="#accordion">
                            <ul class="text-left" id="category-menu-items">
                                {% for seller in sellers %}
                                <li>
                                    <a id="seller_{{ seller.slug }}" href="{% url 'store-products-page-filter-seller' seller.slug %}">{{ seller.seller_listing_name | capfirst}}</a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- Prices card -->
                    <div class="card">
                        <div class="card-header" role="tab" id="pricesHeading">
                            <a data-toggle="collapse" data-parent="#accordion" href="#pricesCollapse" aria-expanded="true" aria-controls="pricesCollapse">
                                <div class="row">
                                    <div class="col-9">
                                        <h5 class="mb-0" id="collapsed-accordion-label"><b>Price</b></h5>
                                    </div>
                                    <div class="col-3 text-right text-dark">
                                        <li class="fa fa-plus" id="plus-icon"></li>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div id="pricesCollapse" class="collapse" role="tabpanel" aria-labelledby="sellerHeading" data-parent="#accordion">
                            <ul class="text-left" id="category-menu-items">
                                <li><a href="{% url 'store-products-page-filter-price' 0 5 %}">$0.00 - $5.00</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
    </div>
    <hr>
    <h4 class="text-center"><b class="text-danger">{{ products.count }}</b> Products found</h4>
    <br>
    <!-- If no products in query set display message -->
    {% if products.count == 0 %}
    <br>
    <h2 class="text-center">Oops, we didn't find any products matching your search!</h2>
    {% endif %}
    <div class="card-columns col-md">
        {% for product in products %}
        <a href="{% url 'store-view-item' product.product_id %}" style="text-decoration: none !important;">
            <div class="card h-100 rounded-0  border-0">
                <div class="img-wrapper">
                    <div class="image">
                        <img class="card-img-top rounded-0" src="{{ product.product_image.url }}" id="card-image" alt="Product Image">
                    </div>
                    <div class="img-overlay">
                        <div class="btn" id="btn-view-item">VIEW</div>
                    </div>
                </div>
                <div class="card-body text-center">
                    <h4 class="card-title">
                        <a id="product-name">{{ product.product_name }}</a>
                    </h4>
                    <p id="seller-name">// {{product.seller.seller_listing_name }} //</p>
                    <!-- <p id="item-number">#{{ product.product_id }}</p> -->
                    <p class="card-text" id="product-description">{{ product.description }}</p>
                    <h5 id="product-price">${{ product.price | floatformat:2 }}</h5>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    <script>
        var activeFilterID = "{{active}}";
        var activeElement = document.getElementById(activeFilterID);
        activeElement.classList.add("active");
    </script>
</div>
{% endblock content %}